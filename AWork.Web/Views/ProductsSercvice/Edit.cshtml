@model AWork.Contracts.Dto.Production.UploadImagesEdit

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/css/style.css" rel="stylesheet" type="text/css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

@{
    ViewData["Title"] = "Edit";
                    var no = 1;
}

<h1>Edit Product</h1>

@using (Html.BeginForm("Edit"
, "ProductsSercvice"
, FormMethod.Post
, new { @enctype = "multipart/form-data" }))
{

    @Html.AntiForgeryToken()
    <center><h4 class="mb-3">Add/Edit Product</h4></center>

    <button type="submit" class="btn btn-secondary" align="right">Save</button>

    @Html.ValidationSummary(true,"",new {@class="text-danger"})
      @*Employee*@

                @Html.HiddenFor(Model => Model.productDto.ProductId)
                @Html.HiddenFor(Model => Model.productPhotoDto.ProductPhotoId)

               

    <div class="row g-3">
        <div class="col-md-4">
            <label asp-for="productDto.Name" class="control-label"></label>
            <input asp-for="productDto.Name" class="form-control" />
            <span asp-validation-for="productDto.Name" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.ProductNumber" class="control-label"></label>
            <input asp-for="productDto.ProductNumber" class="form-control" />
            <span asp-validation-for="productDto.ProductNumber" class="text-danger"></span>
        </div>

        <div class="col-md-4">
            <label asp-for="productDto.MakeFlag" class="control-label"></label>
            <input asp-for="productDto.MakeFlag" class="form-control" />
            <span asp-validation-for="productDto.MakeFlag" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.FinishedGoodsFlag" class="control-label"></label>
            <input asp-for="productDto.FinishedGoodsFlag" class="form-control" />
            <span asp-validation-for="productDto.FinishedGoodsFlag" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.Color" class="control-label"></label>
            <input asp-for="productDto.Color" class="form-control" />
            <span asp-validation-for="productDto.Color" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.SafetyStockLevel" class="control-label"></label>
            <input asp-for="productDto.SafetyStockLevel" class="form-control" />
            <span asp-validation-for="productDto.SafetyStockLevel" class="text-danger"></span>
        </div>

        <div class="col-md-4">
            <label asp-for="productDto.ReorderPoint" class="control-label"></label>
            <input asp-for="productDto.ReorderPoint" class="form-control" />
            <span asp-validation-for="productDto.ReorderPoint" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.StandardCost" class="control-label"></label>
            <input asp-for="productDto.StandardCost" class="form-control" />
            <span asp-validation-for="productDto.StandardCost" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.ListPrice" class="control-label"></label>
            <input asp-for="productDto.ListPrice" class="form-control" />
            <span asp-validation-for="productDto.ListPrice" class="text-danger"></span>
        </div>

        <div class="col-md-4">
            <label asp-for="productDto.Size" class="control-label"></label>
            <input asp-for="productDto.Size" class="form-control" />
            <span asp-validation-for="productDto.Size" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.SizeUnitMeasureCode" class="control-label" readonly></label>
            <select asp-for="productDto.SizeUnitMeasureCode" class="form-control" asp-items="ViewBag.SizeUnitMeasureCode" readonly></select>
            <span asp-validation-for="productDto.SizeUnitMeasureCode" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.WeightUnitMeasureCode" class="control-label" readonly></label>
            <select asp-for="productDto.WeightUnitMeasureCode" class="form-control" asp-items="ViewBag.WeightUnitMeasureCode" readonly></select>
            <span asp-validation-for="productDto.WeightUnitMeasureCode" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.Weight" class="control-label"></label>
            <input asp-for="productDto.Weight" class="form-control" />
            <span asp-validation-for="productDto.Weight" class="text-danger"></span>
        </div>

        <div class="col-md-4">
            <label asp-for="productDto.DaysToManufacture" class="control-label"></label>
            <input asp-for="productDto.DaysToManufacture" class="form-control" />
            <span asp-validation-for="productDto.DaysToManufacture" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.ProductLine" class="control-label"></label>
            <input asp-for="productDto.ProductLine" class="form-control" />
            <span asp-validation-for="productDto.ProductLine" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.Class" class="control-label"></label>
            <input asp-for="productDto.Class" class="form-control" />
            <span asp-validation-for="productDto.Class" class="text-danger"></span>
        </div>

        <div class="col-md-4">
            <label asp-for="productDto.Style" class="control-label"></label>
            <input asp-for="productDto.Style" class="form-control" />
            <span asp-validation-for="productDto.Style" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.ProductSubcategoryId" class="control-label" readonly></label>
            <select asp-for="productDto.ProductSubcategoryId" class="form-control" asp-items="ViewBag.ProductSubcategoryId" readonly></select>
            <span asp-validation-for="productDto.ProductSubcategoryId" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.SellStartDate" class="control-label"></label>
            <input asp-for="productDto.SellStartDate" class="form-control" />
            <span asp-validation-for="productDto.SellStartDate" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="productDto.SellEndDate" class="control-label"></label>
            <input asp-for="productDto.SellEndDate" class="form-control" />
            <span asp-validation-for="productDto.SellEndDate" class="text-danger"></span>
        </div>

        <div class="col-md-4">
            <label asp-for="productDto.DiscontinuedDate" class="control-label"></label>
            <input asp-for="productDto.DiscontinuedDate" class="form-control" />
            <span asp-validation-for="productDto.DiscontinuedDate" class="text-danger"></span>
        </div>

        <div class="col-md-4">
            <label asp-for="productDto.ModifiedDate" class="control-label"></label>
            <input asp-for="productDto.ModifiedDate" class="form-control" />
            <span asp-validation-for="productDto.ModifiedDate" class="text-danger"></span>
        </div>


        <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">
            <div style="display:flex">
                @foreach (var item in Model.productDto.ProductProductPhotos)
                {
                    if (Model.productDto.ProductProductPhotos.FirstOrDefault() == item)
                    {
                        @*<div class="carousel-item active">
                            <img class="card-img-top" style="height:300px" src="@Url.Content("~/Resources/Images/"+item.ProductPhoto.ThumbnailPhotoFileName)" alt="Card image cap">
                        </div>*@

                        <div class="col-lg-4 col-md-4 col-6">
                            <img id="preview.@no" src="@Url.Content("~/Resources/Images/"+item.ProductPhoto.ThumbnailPhotoFileName)" style="width:100px;height:100px;" />
                            <br>
                            @Html.TextBoxFor(model => model.FileImages,"",
                            new{@type="file",@accept="image/*", @onchange="previewImage(this,'preview."+no+"')"})
                            <button type="button" onclick="clearPhoto('ProductProductPhotos','preview.@no')" style="width:100px">Clear</button>
                            @Html.ValidationMessage("Photo1",new{@class="text-danger"})
                        </div>
                    }
                    else
                    {
                        @*<div class="carousel-item">
                            <img class="card-img-top" style="height:300px" src="@Url.Content("~/Resources/Images/"+item.ProductPhoto.ThumbnailPhotoFileName)" alt="Card image cap">
                        </div>*@
                        <div class="col-lg-4 col-md-4 col-6">
                            <img id="preview.@no" src="@Url.Content("~/Resources/Images/"+item.ProductPhoto.ThumbnailPhotoFileName)" style="width:100px;height:100px;" />
                            <br>
                            @Html.TextBoxFor(model => model.FileImages,"",
                            new{@type="file",@accept="image/*", @onchange="previewImage(this,'preview."+no+"')"})
                            <button type="button" onclick="clearPhoto('ProductProductPhotos','preview.@no')" style="width:100px">Clear</button>
                            @Html.ValidationMessage("Photo1",new{@class="text-danger"})
                        </div>
                    }
                    no++;
                }@*
                <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>*@

                

            </div>

        </div>

       
</div>
    <br />

  

}

<div>
    <br />
    <a class="btn btn-secondary text-end mb-2" asp-action="Index">Back </a>
</div>

@section Scripts {
    @{

    await Html.RenderPartialAsync("_ValidationScriptsPartial");

}
}

    <script>
        function clearPhoto(photo, preview) {
            //isi element input type
            document.getElementById(photo).value = '';
            document.getElementById(preview).src = "/Resources/Images/icon.png"
        }

        function previewImage(elemen, value) {
            //store file image to variable files
            const files = elemen.files[0];
            //create object FileReader
            const fileReader = new FileReader();
            //read files from element input type
            fileReader.readAsDataURL(files);
            //send result base64 image to element html preview1
            fileReader.onload = function (event) {
                document.getElementById(value).src = event.target.result;
            }
        }
    </script>